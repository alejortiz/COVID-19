legend.position = "bottom",
legend.text = element_text(size = 14, margin = margin(r = 40, unit = "pt")),
plot.title = element_text(hjust = 0.5)
) +
labs(title = "COVID-19: Antioquia - Modelo SIR - Población susceptible: 6.355.502",
subtitle = "Fuente casos confirmados: Instituto Nacional de Salud (15/04/2020)",
x = NULL,
y = NULL,
color = NULL)
#Static
ggsave(plot = models_plot, "model_comparison_20-04-2020.png")
tidy_antioquia %>%
filter(name != "n") %>%
ggplot(aes(fecha_diagnostico, value, color = name)) +
geom_line() +
geom_point() +
scale_color_manual(values = colors, labels = c("Casos confirmados",
"Escenario pesimista (30%)",
"Escenario intermedio (45%)",
"Escenario optimista (60%)")) +
facet_zoom(xlim = c(ymd("2020-04-01"), ymd("2020-04-30")),
ylim = c(0, 500), zoom.size = 1.2) +
theme(axis.text.y = element_text(size = 14),
title = element_text(size = 16, face = "bold", family = "sans"),
legend.position = "bottom",
legend.text = element_text(margin = margin(r = 40, unit = "pt")),
plot.title = element_text(hjust = 0.5)
) +
labs(title = "COVID-19: Antioquia - Modelo SIR - Población susceptible: 6.355.502",
subtitle = "Fuente casos confirmados: Instituto Nacional de Salud (15/04/2020)",
x = NULL,
y = NULL,
color = NULL)
models_plot <- tidy_antioquia %>%
filter(name != "n") %>%
ggplot(aes(fecha_diagnostico, value, color = name)) +
geom_line() +
geom_point() +
scale_color_manual(values = colors, labels = c("Casos confirmados",
"Escenario pesimista (30%)",
"Escenario intermedio (45%)",
"Escenario optimista (60%)")) +
facet_zoom(xlim = c(ymd("2020-04-01"), ymd("2020-04-30")),
ylim = c(0, 500), zoom.size = 1.2) +
theme(axis.text.y = element_text(size = 14),
title = element_text(size = 16, face = "bold", family = "sans"),
legend.position = "bottom",
legend.text = element_text(margin = margin(r = 40, unit = "pt")),
plot.title = element_text(hjust = 0.5)
) +
labs(title = "COVID-19: Antioquia - Modelo SIR - Población susceptible: 6.355.502",
subtitle = "Fuente casos confirmados: Instituto Nacional de Salud (15/04/2020)",
x = NULL,
y = NULL,
color = NULL)
#Static
ggsave(plot = models_plot, "model_comparison_20-04-2020.png")
models_plot <- tidy_antioquia %>%
filter(name != "n") %>%
ggplot(aes(fecha_diagnostico, value, color = name)) +
geom_line() +
geom_point() +
scale_color_manual(values = colors, labels = c("Casos confirmados",
"Escenario pesimista (30%)",
"Escenario intermedio (45%)",
"Escenario optimista (60%)")) +
facet_zoom(xlim = c(ymd("2020-04-01"), ymd("2020-04-30")),
ylim = c(0, 500), zoom.size = 1.2) +
theme(axis.text.y = element_text(size = 14),
title = element_text(size = 16, face = "bold", family = "sans"),
legend.position = "bottom",
legend.text = element_text(margin = margin(r = 40, unit = "pt")),
plot.title = element_text(hjust = 0.5)
) +
labs(title = "COVID-19: Antioquia - Modelo SIR - Población susceptible: 6.355.502",
subtitle = "Fuente casos confirmados: Instituto Nacional de Salud (20/04/2020)",
x = NULL,
y = NULL,
color = NULL)
#Static
ggsave(plot = models_plot, "model_comparison_20-04-2020.png")
hosp_data %>%
mutate(date = seq.Date(from = ymd("2020-03-25"), to = ymd("2021-03-11"), by = 1)) %>%
left_join(ips, by = c("date" = "Fecha consulta"))
cumulative %>%
group_by(fecha_diagnostico) %>%
summarize(acumulado = sum(acum)) %>%
as_tsibble() %>%
tsibble::fill_gaps() %>%
mutate(acumulado = zoo::na.locf(acumulado, fromLast = TRUE))
library(tsibble)
library(fable)
cumulative %>%
group_by(fecha_diagnostico) %>%
summarize(acumulado = sum(acum)) %>%
as_tsibble() %>%
tsibble::fill_gaps() %>%
mutate(acumulado = zoo::na.locf(acumulado, fromLast = TRUE))
cumulative %>%
group_by(fecha_diagnostico) %>%
summarize(acumulado = sum(acum)) %>%
as_tsibble() %>%
tsibble::fill_gaps()
hosp_data %>%
mutate(date = seq.Date(from = ymd("2020-03-25"), to = ymd("2021-03-11"), by = 1)) %>%
left_join(ips, by = c("date" = "Fecha consulta"))
raw_ips %>%
filter(Resultado...57 == "Positivo") %>%
mutate(`Fecha consulta` = as_date(`Fecha consulta`)) %>%
group_by(`Fecha consulta`, ERP) %>%
count()
ips <- raw_ips %>%
filter(Resultado...57 == "Positivo") %>%
mutate(`Fecha consulta` = as_date(`Fecha consulta`)) %>%
group_by(`Fecha consulta`, ERP) %>%
count()
hosp_data %>%
mutate(date = seq.Date(from = ymd("2020-03-25"), to = ymd("2021-03-11"), by = 1)) %>%
left_join(ips, by = c("date" = "Fecha consulta"))
hosp_data %>%
mutate(date = seq.Date(from = ymd("2020-03-25"), to = ymd("2021-03-11"), by = 1)) %>%
left_join(ips, by = c("date" = "Fecha consulta")) %>%
mutate((acum = cumsum(n)))
raw_ips %>%
filter(Resultado...57 == "Positivo") %>%
mutate(`Fecha consulta` = as_date(`Fecha consulta`)) %>%
group_by(`Fecha consulta`, ERP) %>%
count() %>%
ungroup() %>%
mutate(acum = cumsum(n))
ips <- raw_ips %>%
filter(Resultado...57 == "Positivo") %>%
mutate(`Fecha consulta` = as_date(`Fecha consulta`)) %>%
group_by(`Fecha consulta`, ERP) %>%
count() %>%
ungroup() %>%
mutate(acum = cumsum(n))
hosp_data %>%
mutate(date = seq.Date(from = ymd("2020-03-25"), to = ymd("2021-03-11"), by = 1)) %>%
left_join(ips, by = c("date" = "Fecha consulta"))
hosp_data %>%
mutate(date = seq.Date(from = ymd("2020-03-25"), to = ymd("2021-03-11"), by = 1)) %>%
left_join(ips, by = c("date" = "Fecha consulta")) %>%
mutate(n = replace_na(n,0))
ips <- raw_ips %>%
filter(Resultado...57 == "Positivo") %>%
mutate(`Fecha consulta` = as_date(`Fecha consulta`)) %>%
group_by(`Fecha consulta`, ERP) %>%
count() %>%
ungroup()
hosp_data %>%
mutate(date = seq.Date(from = ymd("2020-03-25"), to = ymd("2021-03-11"), by = 1)) %>%
left_join(ips, by = c("date" = "Fecha consulta")) %>%
mutate(n = replace_na(n,0))
hosp_data %>%
mutate(date = seq.Date(from = ymd("2020-03-25"), to = ymd("2021-03-11"), by = 1)) %>%
left_join(ips, by = c("date" = "Fecha consulta")) %>%
mutate(n = replace_na(n,0),
acum = cumsum(n))
hosp_data %>%
mutate(date = seq.Date(from = ymd("2020-03-25"), to = ymd("2021-03-11"), by = 1)) %>%
left_join(ips, by = c("date" = "Fecha consulta")) %>%
mutate(n = replace_na(n,0),
acum = cumsum(n)) %>% View()
hosp_mixed <- hosp_data %>%
mutate(date = seq.Date(from = ymd("2020-03-25"), to = ymd("2021-03-11"), by = 1)) %>%
left_join(ips, by = c("date" = "Fecha consulta")) %>%
mutate(n = replace_na(n,0),
acum = cumsum(n))
hosp_mixed
hosp_mixed[,acum]
hosp_mixed[,"acum"]
hosp_mixed[,c("n", "acum")]
hosp_mixed
View(hosp_mixed)
Sys.Date()
hosp_mixed <- hosp_data %>%
mutate(date = seq.Date(from = ymd("2020-03-25"), to = ymd("2021-03-11"), by = 1)) %>%
left_join(ips, by = c("date" = "Fecha consulta")) %>%
mutate(n = replace_na(n,0),
acum = cumsum(n)) %>%
mutate(n = case_when(date > Sys.Date() ~ NA_integer_),
acum = case_when(date > Sys.Date() ~ NA_integer_))
View(hosp_mixed)
class(Sys.Date(
))
class(Sys.Date())
class(Sys.Date()) > hosp_mixed$date[1]
Sys.Date() > hosp_mixed$date[1]
Sys.Date()
hosp_mixed$date[1]
hosp_mixed <- hosp_data %>%
mutate(date = seq.Date(from = ymd("2020-03-25"), to = ymd("2021-03-11"), by = 1)) %>%
left_join(ips, by = c("date" = "Fecha consulta")) %>%
mutate(n = replace_na(n,0),
acum = cumsum(n)) %>%
mutate(n = case_when(date > Sys.Date() ~ NA_integer_,
TRUE ~ n),
acum = case_when(date > Sys.Date() ~ NA_integer_,
TRUE ~ n))
View(hosp_mixed)
hosp_data %>%
mutate(date = seq.Date(from = ymd("2020-03-25"), to = ymd("2021-03-11"), by = 1)) %>%
left_join(ips, by = c("date" = "Fecha consulta")) %>%
mutate(n = replace_na(n,0),
acum = cumsum(n))
hosp_data %>%
mutate(date = seq.Date(from = ymd("2020-03-25"), to = ymd("2021-03-11"), by = 1)) %>%
left_join(ips, by = c("date" = "Fecha consulta")) %>%
mutate(n = replace_na(n,0),
acum = cumsum(n)) %>%
mutate(n = case_when(date > Sys.Date() ~ NA_integer_,
TRUE ~ n),
acum = case_when(date > Sys.Date() ~ NA_integer_,
TRUE ~ acum))
hosp_data %>%
mutate(date = seq.Date(from = ymd("2020-03-25"), to = ymd("2021-03-11"), by = 1)) %>%
left_join(ips, by = c("date" = "Fecha consulta")) %>%
mutate(n = replace_na(n,0),
acum = cumsum(n)) %>%
mutate(n = case_when(date > Sys.Date() ~ NA_integer_,
TRUE ~ n),
acum = case_when(date > Sys.Date() ~ NA_integer_,
TRUE ~ acum))
hosp_data %>%
mutate(date = seq.Date(from = ymd("2020-03-25"), to = ymd("2021-03-11"), by = 1)) %>%
left_join(ips, by = c("date" = "Fecha consulta")) %>%
mutate(n = replace_na(n,0),
acum = cumsum(n)) %>%
mutate(n = case_when(date > Sys.Date() ~ NA_real_,
TRUE ~ n),
acum = case_when(date > Sys.Date() ~ NA_real_,
TRUE ~ acum))
hosp_mixed <- hosp_data %>%
mutate(date = seq.Date(from = ymd("2020-03-25"), to = ymd("2021-03-11"), by = 1)) %>%
left_join(ips, by = c("date" = "Fecha consulta")) %>%
mutate(n = replace_na(n,0),
acum = cumsum(n)) %>%
mutate(n = case_when(date > Sys.Date() ~ NA_real_,
TRUE ~ n),
acum = case_when(date > Sys.Date() ~ NA_real_,
TRUE ~ acum))
View(hosp_mixed)
models_plot
hosp_mixed
pivot_longer(cols = c("hospS1", "hospS2", "hospS3", "acum"))
hosp_mixed %>%
pivot_longer(cols = c("hospS1", "hospS2", "hospS3", "acum"))
tidy_hosp <- hosp_mixed %>%
pivot_longer(cols = c("hospS1", "hospS2", "hospS3", "acum"))
tidy_hosp %>%
ggplot(aes(date, value, color = name)) +
geom_line() +
geom_point() +
scale_color_manual(values = colors, labels = c("Casos confirmados",
"Escenario pesimista (30%)",
"Escenario intermedio (45%)",
"Escenario optimista (60%)")) +
facet_zoom(xlim = c(ymd("2020-03-25"), ymd("2020-04-25")),
ylim = c(0, 500), zoom.size = 1.2) +
theme(axis.text.y = element_text(size = 14),
title = element_text(size = 16, face = "bold", family = "sans"),
legend.position = "bottom",
legend.text = element_text(margin = margin(r = 40, unit = "pt")),
plot.title = element_text(hjust = 0.5)
) +
labs(title = "COVID-19: EPS priorizadas - Modelo SIR - Población susceptible: 1.986.560",
subtitle = "Fuente casos confirmados: Puesto de mando unificado - IPS Universitaria (20/04/2020)",
x = NULL,
y = NULL,
color = NULL)
tidy_hosp %>%
ggplot(aes(date, value, color = name)) +
geom_line()
tidy_hosp %>%
ggplot(aes(date, value, color = name)) +
geom_line() +
geom_point()
tidy_hosp
hosp_colors <- c("acum" = "black", "hospS1" = "darkblue", "hospS2" ="darkorange", "hospS3" = "darkred")
tidy_hosp %>%
ggplot(aes(date, value, color = name)) +
geom_line() +
geom_point() +
scale_color_manual(values = colors, labels = c("Casos confirmados",
"Escenario pesimista (30%)",
"Escenario intermedio (45%)",
"Escenario optimista (60%)")) +
facet_zoom(xlim = c(ymd("2020-03-25"), ymd("2020-04-25")),
ylim = c(0, 500), zoom.size = 1.2) +
theme(axis.text.y = element_text(size = 14),
title = element_text(size = 16, face = "bold", family = "sans"),
legend.position = "bottom",
legend.text = element_text(margin = margin(r = 40, unit = "pt")),
plot.title = element_text(hjust = 0.5)
) +
labs(title = "COVID-19: EPS priorizadas - Modelo SIR - Población susceptible: 1.986.560",
subtitle = "Fuente casos confirmados: Puesto de mando unificado - IPS Universitaria (20/04/2020)",
x = NULL,
y = NULL,
color = NULL)
tidy_hosp %>%
ggplot(aes(date, value, color = name)) +
geom_line() +
geom_point() +
scale_color_manual(values = hosp_colors, labels = c("Casos confirmados",
"Escenario pesimista (30%)",
"Escenario intermedio (45%)",
"Escenario optimista (60%)")) +
facet_zoom(xlim = c(ymd("2020-03-25"), ymd("2020-04-25")),
ylim = c(0, 500), zoom.size = 1.2) +
theme(axis.text.y = element_text(size = 14),
title = element_text(size = 16, face = "bold", family = "sans"),
legend.position = "bottom",
legend.text = element_text(margin = margin(r = 40, unit = "pt")),
plot.title = element_text(hjust = 0.5)
) +
labs(title = "COVID-19: EPS priorizadas - Modelo SIR - Población susceptible: 1.986.560",
subtitle = "Fuente casos confirmados: Puesto de mando unificado - IPS Universitaria (20/04/2020)",
x = NULL,
y = NULL,
color = NULL)
tidy_hosp %>%
ggplot(aes(date, value, color = name)) +
geom_line() +
geom_point() +
scale_color_manual(values = hosp_colors, labels = c("Casos confirmados",
"Escenario pesimista (30%)",
"Escenario intermedio (45%)",
"Escenario optimista (60%)")) +
facet_zoom(xlim = c(ymd("2020-03-25"), ymd("2020-04-25")),
ylim = c(0, 500), zoom.size = 1.2) +
theme(axis.text.y = element_text(size = 14),
title = element_text(size = 16, face = "bold", family = "sans"),
legend.position = "bottom",
legend.text = element_text(margin = margin(r = 40, unit = "pt")),
plot.title = element_text(hjust = 0.5)
) +
labs(title = "COVID-19: Población hospitalizada - EPS priorizadas - Modelo SIR - Población susceptible: 1.986.560",
subtitle = "Fuente casos confirmados: Puesto de mando unificado - IPS Universitaria (20/04/2020)",
x = NULL,
y = NULL,
color = NULL)
tidy_hosp %>%
ggplot(aes(date, value, color = name)) +
geom_line() +
geom_point() +
scale_color_manual(values = hosp_colors, labels = c("Casos confirmados",
"Escenario pesimista (30%)",
"Escenario intermedio (45%)",
"Escenario optimista (60%)")) +
facet_zoom(xlim = c(ymd("2020-03-25"), ymd("2020-04-25")),
ylim = c(0, 500), zoom.size = 1.2) +
scale_y_log10() +
theme(axis.text.y = element_text(size = 14),
title = element_text(size = 16, face = "bold", family = "sans"),
legend.position = "bottom",
legend.text = element_text(margin = margin(r = 40, unit = "pt")),
plot.title = element_text(hjust = 0.5)
) +
labs(title = "COVID-19: Población hospitalizada - EPS priorizadas - Modelo SIR - Población susceptible: 1.986.560",
subtitle = "Fuente casos confirmados: Puesto de mando unificado - IPS Universitaria (20/04/2020)",
x = NULL,
y = NULL,
color = NULL)
tidy_hosp %>%
ggplot(aes(date, value, color = name)) +
geom_line() +
geom_point() +
scale_color_manual(values = hosp_colors, labels = c("Casos confirmados",
"Escenario pesimista (30%)",
"Escenario intermedio (45%)",
"Escenario optimista (60%)")) +
facet_zoom(xlim = c(ymd("2020-03-25"), ymd("2020-04-25")),
ylim = c(0, 500), zoom.size = 1.2) +
theme(axis.text.y = element_text(size = 14),
title = element_text(size = 16, face = "bold", family = "sans"),
legend.position = "bottom",
legend.text = element_text(margin = margin(r = 40, unit = "pt")),
plot.title = element_text(hjust = 0.5)
) +
labs(title = "COVID-19: Población hospitalizada - EPS priorizadas - Modelo SIR - Población susceptible: 1.986.560",
subtitle = "Fuente casos confirmados: Puesto de mando unificado - IPS Universitaria (20/04/2020)",
x = NULL,
y = NULL,
color = NULL)
tidy_hosp %>%
ggplot(aes(date, value, color = name)) +
geom_line() +
geom_point() +
scale_color_manual(values = hosp_colors, labels = c("Casos confirmados",
"Escenario pesimista (30%)",
"Escenario intermedio (45%)",
"Escenario optimista (60%)")) +
facet_zoom(xlim = c(ymd("2020-03-13"), ymd("2020-04-25")),
ylim = c(0, 500), zoom.size = 1.2) +
theme(axis.text.y = element_text(size = 14),
title = element_text(size = 16, face = "bold", family = "sans"),
legend.position = "bottom",
legend.text = element_text(margin = margin(r = 40, unit = "pt")),
plot.title = element_text(hjust = 0.5)
) +
labs(title = "COVID-19: Población hospitalizada - EPS priorizadas - Modelo SIR - Población susceptible: 1.986.560",
subtitle = "Fuente casos confirmados: Puesto de mando unificado - IPS Universitaria (20/04/2020)",
x = NULL,
y = NULL,
color = NULL)
tidy_hosp %>%
ggplot(aes(date, value, color = name)) +
geom_line() +
geom_point() +
scale_color_manual(values = hosp_colors, labels = c("Casos confirmados",
"Escenario pesimista (30%)",
"Escenario intermedio (45%)",
"Escenario optimista (60%)")) +
facet_zoom(xlim = c(ymd("2020-04-13"), ymd("2020-04-25")),
ylim = c(0, 500), zoom.size = 1.2) +
theme(axis.text.y = element_text(size = 14),
title = element_text(size = 16, face = "bold", family = "sans"),
legend.position = "bottom",
legend.text = element_text(margin = margin(r = 40, unit = "pt")),
plot.title = element_text(hjust = 0.5)
) +
labs(title = "COVID-19: Población hospitalizada - EPS priorizadas - Modelo SIR - Población susceptible: 1.986.560",
subtitle = "Fuente casos confirmados: Puesto de mando unificado - IPS Universitaria (20/04/2020)",
x = NULL,
y = NULL,
color = NULL)
tidy_hosp %>%
ggplot(aes(date, value, color = name)) +
geom_line() +
geom_point() +
scale_color_manual(values = hosp_colors, labels = c("Casos confirmados",
"Escenario pesimista (30%)",
"Escenario intermedio (45%)",
"Escenario optimista (60%)")) +
facet_zoom(xlim = c(ymd("2020-04-13"), ymd("2020-04-25")),
ylim = c(0, 100), zoom.size = 1.2) +
theme(axis.text.y = element_text(size = 14),
title = element_text(size = 16, face = "bold", family = "sans"),
legend.position = "bottom",
legend.text = element_text(margin = margin(r = 40, unit = "pt")),
plot.title = element_text(hjust = 0.5)
) +
labs(title = "COVID-19: Población hospitalizada - EPS priorizadas - Modelo SIR - Población susceptible: 1.986.560",
subtitle = "Fuente casos confirmados: Puesto de mando unificado - IPS Universitaria (20/04/2020)",
x = NULL,
y = NULL,
color = NULL)
tidy_hosp %>%
ggplot(aes(date, value, color = name)) +
geom_line() +
geom_point() +
scale_color_manual(values = hosp_colors, labels = c("Casos confirmados",
"Escenario pesimista (30%)",
"Escenario intermedio (45%)",
"Escenario optimista (60%)")) +
facet_zoom(xlim = c(ymd("2020-04-13"), ymd("2020-04-25")),
ylim = c(0, 50), zoom.size = 1.2) +
theme(axis.text.y = element_text(size = 14),
title = element_text(size = 16, face = "bold", family = "sans"),
legend.position = "bottom",
legend.text = element_text(margin = margin(r = 40, unit = "pt")),
plot.title = element_text(hjust = 0.5)
) +
labs(title = "COVID-19: Población hospitalizada - EPS priorizadas - Modelo SIR - Población susceptible: 1.986.560",
subtitle = "Fuente casos confirmados: Puesto de mando unificado - IPS Universitaria (20/04/2020)",
x = NULL,
y = NULL,
color = NULL)
tidy_hosp %>%
ggplot(aes(date, value, color = name)) +
geom_line() +
geom_point() +
scale_color_manual(values = hosp_colors, labels = c("Casos confirmados",
"Escenario pesimista (30%)",
"Escenario intermedio (45%)",
"Escenario optimista (60%)")) +
facet_zoom(xlim = c(ymd("2020-03-25"), ymd("2020-04-25")),
ylim = c(0, 50), zoom.size = 1.2) +
theme(axis.text.y = element_text(size = 14),
title = element_text(size = 16, face = "bold", family = "sans"),
legend.position = "bottom",
legend.text = element_text(margin = margin(r = 40, unit = "pt")),
plot.title = element_text(hjust = 0.5)
) +
labs(title = "COVID-19: Población hospitalizada - EPS priorizadas - Modelo SIR - Población susceptible: 1.986.560",
subtitle = "Fuente casos confirmados: Puesto de mando unificado - IPS Universitaria (20/04/2020)",
x = NULL,
y = NULL,
color = NULL)
tidy_hosp %>%
ggplot(aes(date, value, color = name)) +
geom_line() +
geom_point() +
scale_color_manual(values = hosp_colors, labels = c("Casos confirmados",
"Escenario pesimista (30%)",
"Escenario intermedio (45%)",
"Escenario optimista (60%)")) +
facet_zoom(xlim = c(ymd("2020-03-26"), ymd("2020-04-25")),
ylim = c(0, 50), zoom.size = 1.2) +
theme(axis.text.y = element_text(size = 14),
title = element_text(size = 16, face = "bold", family = "sans"),
legend.position = "bottom",
legend.text = element_text(margin = margin(r = 40, unit = "pt")),
plot.title = element_text(hjust = 0.5)
) +
labs(title = "COVID-19: Población hospitalizada - EPS priorizadas - Modelo SIR - Población susceptible: 1.986.560",
subtitle = "Fuente casos confirmados: Puesto de mando unificado - IPS Universitaria (20/04/2020)",
x = NULL,
y = NULL,
color = NULL)
